{% extends 'base.html' %}

{% block title %}Search Results{% endblock %}

{% block body %}
<a href="/"><button>Go back to homepage</button></a>

<h1>Book List: </h1>

<ul>
    {% for book in books %}
    <li>
        <strong>Book Title:</strong> {{book['volumeInfo']['title']}}
        <strong> Book Author:</strong>
        {% if 'authors' in book['volumeInfo']%}

        {{", ".join(book['volumeInfo']['authors'])}}

        {% endif %}
        <strong> ISBN: </strong>
        {% if 'industryIdentifiers' in book['volumeInfo']%}

        {{ book['volumeInfo']['industryIdentifiers'][0]['identifier'] }}

        {% endif %}

        {% if 'imageLinks' in book['volumeInfo'] %}

        <img src="{{ book['volumeInfo']['imageLinks']['smallThumbnail'] }}">

        {% endif %}

    </li>
    {% if "user_id" in session %}

    <button  {% if 'industryIdentifiers' in book['volumeInfo']%}{% if book['volumeInfo']['industryIdentifiers'][0]['identifier'] in filtered_books %} disabled {% endif %} {%endif%} onclick="ownedBook(event,
        '{{book['volumeInfo']['title']}}',
        
        {% if 'authors' in book['volumeInfo']%}
        
        '{{book['volumeInfo']['authors'][0]}}',
        
        {% endif %}
        
        {% if 'industryIdentifiers' in book['volumeInfo']%}

        '{{book['volumeInfo']['industryIdentifiers'][0]['identifier']}}',
        
        {% endif %}

        {% if 'imageLinks' in book['volumeInfo']%}
        
        '{{book['volumeInfo']['imageLinks']['smallThumbnail']}}'
        
        {% endif %}
        
        )">I own this book</button>
    {% endif %}
    {% endfor %} 
</ul>


<script src="../static/searchResults.js"></script>


{% endblock %}